<!DOCTYPE html>
<html>
<html lang="en">
	<head>
 		<meta charset="utf-8">
		<title>OTOG - One Tambon One Grader</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- bootstrap integral -->
 <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>

  <!-- main source of custom css -->
	<link rel="stylesheet" type="text/css" href="/stylesheets/style.css">
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">

	<script>
		$(document).ready(function() {
			var score = <%-JSON.stringify(score)%>;
			var problem = <%-JSON.stringify(problem)%>;
			console.log(score);
			console.log(problem);
			var tr;
			var sz = score.length;
			var sz_prob = problem.length;
			//alert(sz);
			for (var i = 0; i < sz; i++) {
				var do_prob = score[i].task.length;
				tr = $("<tr/>");
				tr.addClass("item");
				var name = score[i].name;
				if(score[i].score == 300) tr.addClass("w3-khaki")
				tr.append("<td>" + (i+1) + "</td>");
				tr.append("<td>" + name + "</td>");
				for(var j = 0; j < sz_prob; j++) {
					var idx = -1;
					for(var k = 0; k < do_prob; k++) {
						if(problem[j].id_Prob == score[i].task[k].task) idx = k
					}
					if(idx != -1) tr.append("<td>" + score[i].task[idx].score.toFixed() + "</td>");
					else tr.append("<td>" + "0" + "</td>");
				}
				tr.append("<td>" + score[i].score.toFixed() + "</td>");
				tr.append("<td>" + score[i].timeuse.toFixed(2) + "</td>");
				$("#body").append(tr);
			}
		});
	</script>
</head>

<body>

	<!-- navigation bar -->
	<nav class="navbar navbar-expand-sm navbar-light justify-content-between" style="background-color: #F1F1F1">
		<a class="navbar-brand head_typo" href="main">OTOG<span> - One Tambon One Grader</span></a>
		<ul class="navbar-nav">
			<li class="nav-item">
				<a class="nav-link head_typo" href="main">
				<i class="fa fa-home"></i>
				<span>Main</span>
			</a>
			</li>
			<li class="nav-item">
				<a class="nav-link head_typo" href="problems">
				<i class="fa fa-puzzle-piece"></i>
				<span>Problems</span>
			</a>
			</li>
			<li class="nav-item">
				<a class="nav-link head_typo active" href="contest">
				<i class="fa fa-trophy"></i>
				<span>Contest</span>
			</a>
			</li>
			<li class="nav-item">
				<a class="nav-link head_typo" href="ratings">
				<i class="fa fa-bar-chart"></i>
				<span>Ratings</span>
			</a>
			</li>
			<li class="nav-item">
				<a class="nav-link head_typo" href="login">
				<i class="fa fa-sign-in"></i>
				<span>Login</span></a>
			</li>
		</ul>
	</nav><br><br><br>
	<!-- scoreboard section -->
	<div class="container table-responsive">
	<div class="row">
		<div class="col-md-6">
			<h2><i class="fa fa-area-chart"></i> Contest Ranking</h2>
		</div>
		<div class="col-md-6">
			<a href = "contest"
			class="btn otogbtn btn-lg float-right">View Problem</a>
		</div>
	</div>
	<hr>
	<!-- fetch contest problem + will add fetch probs to head of table-->
	<table class="table table-condensed table-hover" style="text-align: center;">
		<thead>
			<tr style="color: #FF851B">
				<th scope="col">#</th>
				<th scope="col">ชื่อผู้เข้าแข่งขัน</th>
				<th scope="col">ข้อที่ 1</th>
				<th scope="col">ข้อที่ 2</th>
				<th scope="col">ข้อที่ 3</th>
				<th scope="col">คะแนนรวม</th>
				<th scope="col">Running time</th>
			</tr>
		</thead>
		<tbody id='body'></tbody>
	</table>
	<hr>
	<footer>
		<div class="row">
			<div class="col-md-6">
				<p>If you have any problem or suggestion, please <a href="#" style="color: #FF851B"> Contract Us </a></p>
			</div>
			<div class="col-md-6">
				<span class="float-right"> &copy; 2019 Phakphum Dev Team</span>
			</div>
		</div>
	</footer>
	</div>
</body>
</html>
